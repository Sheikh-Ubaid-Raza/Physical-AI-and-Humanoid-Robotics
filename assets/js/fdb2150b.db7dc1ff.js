"use strict";(globalThis.webpackChunkwebsite_name=globalThis.webpackChunkwebsite_name||[]).push([[7765],{1063:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"week-04/building-ros2-packages","title":"Building ROS 2 Packages with Python (rclpy)","description":"Learning Objectives","source":"@site/docs/week-04/building-ros2-packages.md","sourceDirName":"week-04","slug":"/week-04/building-ros2-packages","permalink":"/Physical-AI-and-Humanoid-Robotics/docs/week-04/building-ros2-packages","draft":false,"unlisted":false,"editUrl":"https://github.com/Sheikh-Ubaid-Raza/Physical-AI-and-Humanoid-Robotics/edit/main/docs/week-04/building-ros2-packages.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Building ROS 2 Packages with Python (rclpy)"},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Architecture: Nodes, Topics, Services, Actions","permalink":"/Physical-AI-and-Humanoid-Robotics/docs/week-03/ros2-architecture"},"next":{"title":"Launch Files, Parameter Management, URDF Basics","permalink":"/Physical-AI-and-Humanoid-Robotics/docs/week-05/launch-files-urdf-basics"}}');var r=i(4848),a=i(8453);const t={sidebar_position:1,title:"Building ROS 2 Packages with Python (rclpy)"},l="Building ROS 2 Packages with Python (rclpy)",o={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Theory",id:"theory",level:2},{value:"Package Structure",id:"package-structure",level:3},{value:"Key Components",id:"key-components",level:3},{value:"Code Example 1: Creating a Basic ROS 2 Package Structure",id:"code-example-1-creating-a-basic-ros-2-package-structure",level:2},{value:"Code Example 2: Python ROS 2 Node Implementation",id:"code-example-2-python-ros-2-node-implementation",level:2},{value:"Hands-on Exercises",id:"hands-on-exercises",level:2},{value:"Summary",id:"summary",level:2},{value:"Hardware Requirements",id:"hardware-requirements",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"building-ros-2-packages-with-python-rclpy",children:"Building ROS 2 Packages with Python (rclpy)"})}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create and structure ROS 2 packages using Python"}),"\n",(0,r.jsx)(n.li,{children:"Implement nodes using the rclpy library"}),"\n",(0,r.jsx)(n.li,{children:"Configure package dependencies and build files"}),"\n",(0,r.jsx)(n.li,{children:"Build and run custom ROS 2 packages"}),"\n",(0,r.jsx)(n.li,{children:"Debug common issues in Python-based ROS 2 packages"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Understanding of ROS 2 architecture (covered in Week 3)"}),"\n",(0,r.jsx)(n.li,{children:"Proficiency in Python programming"}),"\n",(0,r.jsx)(n.li,{children:"Basic familiarity with package managers and build systems"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"theory",children:"Theory"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 packages are the fundamental building units of ROS 2 software. A package contains libraries, executables, scripts, or other artifacts. The rclpy library provides a Python client library for ROS 2, allowing developers to create ROS 2 nodes using Python."}),"\n",(0,r.jsx)(n.h3,{id:"package-structure",children:"Package Structure"}),"\n",(0,r.jsx)(n.p,{children:"A typical ROS 2 Python package follows this structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt          # Build configuration (even for pure Python packages)\n\u251c\u2500\u2500 package.xml             # Package manifest\n\u251c\u2500\u2500 setup.cfg               # Installation configuration\n\u251c\u2500\u2500 setup.py                # Python package setup\n\u251c\u2500\u2500 my_robot_package/       # Python module\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 my_nodes.py\n\u2514\u2500\u2500 test/                   # Test files\n"})}),"\n",(0,r.jsx)(n.h3,{id:"key-components",children:"Key Components"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"package.xml"}),": Contains package metadata including name, version, description, authors, maintainers, licenses, dependencies, and export tags."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"setup.py"}),": Standard Python packaging file that specifies how the package should be built and installed. For ROS 2 packages, this includes information about entry points and data files."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"rclpy"}),": The Python client library for ROS 2 that provides Python bindings to the ROS 2 client library (rcl). It allows creating nodes, publishers, subscribers, services, and actions."]}),"\n",(0,r.jsx)(n.h2,{id:"code-example-1-creating-a-basic-ros-2-package-structure",children:"Code Example 1: Creating a Basic ROS 2 Package Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# setup.py\n# Purpose: Define the Python package structure for ROS 2\n# Setup Instructions: Place in root of package directory\n# Run: python setup.py install (or colcon build in workspace)\n\nfrom setuptools import setup\nimport os\nfrom glob import glob\n\npackage_name = 'my_robot_package'\n\nsetup(\n    name=package_name,\n    version='0.0.1',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Include all launch files\n        (os.path.join('share', package_name, 'launch'),\n         glob(os.path.join('launch', '*launch.[pxy][yma]*'))),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='your.email@example.com',\n    description='A simple ROS 2 package for robot control',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'simple_publisher = my_robot_package.simple_publisher:main',\n            'simple_subscriber = my_robot_package.simple_subscriber:main',\n        ],\n    },\n)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Expected Output:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# After running colcon build:\nStarting >>> my_robot_package\nFinished <<< my_robot_package [2.35s]\n\n# Package can be sourced and executables run:\nsource install/setup.bash\nros2 run my_robot_package simple_publisher\n"})}),"\n",(0,r.jsx)(n.h2,{id:"code-example-2-python-ros-2-node-implementation",children:"Code Example 2: Python ROS 2 Node Implementation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# my_robot_package/simple_publisher.py\n# Purpose: Implement a simple publisher node using rclpy\n# Setup Instructions: Part of ROS 2 package structure\n# Run: ros2 run my_robot_package simple_publisher\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nimport sys\n\nclass SimplePublisher(Node):\n    def __init__(self):\n        super().__init__(\'simple_publisher\')\n\n        # Create a publisher\n        self.publisher = self.create_publisher(\n            String,\n            \'chatter\',\n            10  # Queue size\n        )\n\n        # Create a timer for periodic publishing\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n        self.counter = 0\n        self.get_logger().info(\'Simple Publisher has started\')\n\n    def timer_callback(self):\n        """Callback function for the timer"""\n        msg = String()\n        msg.data = f\'Hello ROS 2 World: {self.counter}\'\n\n        self.publisher.publish(msg)\n        self.get_logger().info(f\'Published: {msg.data}\')\n\n        self.counter += 1\n\ndef main(args=None):\n    """Main function"""\n    rclpy.init(args=args)\n\n    try:\n        publisher_node = SimplePublisher()\n\n        # Spin the node to execute callbacks\n        rclpy.spin(publisher_node)\n\n    except KeyboardInterrupt:\n        print("\\nShutting down node...")\n\n    finally:\n        # Cleanup\n        publisher_node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Expected Output:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[INFO] [1620123456.789] [simple_publisher]: Simple Publisher has started\n[INFO] [1620123457.289] [simple_publisher]: Published: Hello ROS 2 World: 0\n[INFO] [1620123457.789] [simple_publisher]: Published: Hello ROS 2 World: 1\n[INFO] [1620123458.289] [simple_publisher]: Published: Hello ROS 2 World: 2\n"})}),"\n",(0,r.jsx)(n.h2,{id:"hands-on-exercises",children:"Hands-on Exercises"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create a ROS 2 package that implements a temperature monitoring system with a publisher node and a subscriber node"}),"\n",(0,r.jsx)(n.li,{children:"Build a ROS 2 package that provides a service to convert temperatures between Celsius and Fahrenheit"}),"\n",(0,r.jsx)(n.li,{children:"Develop a ROS 2 package with multiple nodes that coordinate to perform a simple robot task"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"Building ROS 2 packages with Python provides a powerful way to develop robot applications. The rclpy library offers a clean Pythonic interface to ROS 2 concepts. Proper package structure and configuration are essential for creating reusable and maintainable robot software."}),"\n",(0,r.jsx)(n.h2,{id:"hardware-requirements",children:"Hardware Requirements"}),"\n",(0,r.jsx)(n.p,{children:"This chapter can be completed using simulation environments. For physical implementation, the following hardware is recommended:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Computer with ROS 2 installed (Ubuntu 22.04 with ROS 2 Humble Hawksbill)"}),"\n",(0,r.jsx)(n.li,{children:"Python 3.8 or higher"}),"\n",(0,r.jsx)(n.li,{children:"Appropriate robot hardware with ROS 2 compatibility (optional for basic exercises)"}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var s=i(6540);const r={},a=s.createContext(r);function t(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);